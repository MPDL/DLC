<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:fu="http://java.sun.com/jsf/composite/components/fileUpload"
	xmlns:mpdl="http://java.sun.com/jsf/composite/components/mpdl"
	xmlns:list="http://java.sun.com/jsf/composite/components/mpdl/list"
	xmlns:pretty="http://ocpsoft.com/prettyfaces">


<ui:composition template="templates/template_v3.xhtml">
	<ui:define name="mainContent">
			
			<h:form>
			<a4j:repeat var="sortCriterion" value="#{advancedSearchResultBean.sortCriterionList}">
				<h:outputText value="#{lbl.sortCriterion}"/>
			
				<h:selectOneMenu value="#{sortCriterion.sortIndex}">
					<f:selectItems value="#{advancedSearchResultBean.sortIndicesMenu}"/>
					<f:ajax event="change" listener="#{advancedSearchResultBean.changeSortCriteria}" render="@all"/>
				</h:selectOneMenu>
					<h:commandButton action="#{advancedSearchResultBean.changeSortOrder(sortCriterion)}" value="#{sortCriterion.sortOrder}">
						<f:ajax render="@all"/>
					</h:commandButton>
			<br/>
			</a4j:repeat>
			</h:form>
			
		
			<mpdl:paginator paginatorBean="#{advancedSearchResultBean}">
			<h:outputScript library="jscript" name="jquery_1.6.3_min.js"/>
				
				<list:bibList_default>
					<a4j:repeat var="volume" value="#{advancedSearchResultBean.currentPartList}">
				 		<list:bibItemSingleVolume volume="#{volume}" fulltextHits="#{advancedSearchResultBean.fulltextSearchStringsAsQueryParam}" rendered="#{volume.item.properties.contentModel.objid == applicationBean.cmMono }"/>
				 		<list:bibItemMultiVolume volume="#{volume}" fulltextHits="#{advancedSearchResultBean.fulltextSearchStringsAsQueryParam}" rendered="#{volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}"/>
				 		<list:bibItemVolumeForSearch volume="#{volume}" fulltextHits="#{advancedSearchResultBean.fulltextSearchStringsAsQueryParam}" rendered="#{volume.item.properties.contentModel.objid == applicationBean.cmVolume}"/>

					</a4j:repeat>
				</list:bibList_default>
				
			</mpdl:paginator>
	</ui:define>
</ui:composition>

</html>
