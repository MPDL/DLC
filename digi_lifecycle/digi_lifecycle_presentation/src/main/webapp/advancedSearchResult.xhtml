<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:fu="http://java.sun.com/jsf/composite/components/fileUpload"
	xmlns:mpdl="http://java.sun.com/jsf/composite/components/mpdl"
	xmlns:list="http://java.sun.com/jsf/composite/components/mpdl/list"
	xmlns:pretty="http://ocpsoft.com/prettyfaces">


<ui:composition template="templates/template_v3.xhtml">
	<ui:define name="mainContent">
		<mpdl:paginator paginatorBean="#{advancedSearchResultBean}">
			
			<h:panelGroup layout="block" styleClass="eg3_container_1_5">
				
				<h:panelGroup layout="block" styleClass="eg3_container_9_10 eg3_containerCenter" style="margin-top:2em;">
					<h:outputText value="#{lbl.list_sortCriterion}: "/>
				</h:panelGroup>
				
				<h:panelGroup layout="block" styleClass="eg3_container_9_10 eg3_containerCenter">
					<h:form>
						<h:panelGroup layout="block" styleClass="eg3_container_1">
								<h:panelGroup layout="block" styleClass="eg3_container_3_4">
									<h:panelGroup layout="block" styleClass="eg3_dynamicSelectBox_js eg3_container_1 eg3_border_1 eg3_borderstyle_1">
										<h:panelGroup layout="block" styleClass="eg3_selectionContent eg3_content_bgColor eg3_main_color">
											<span class="eg3_selectionText"></span>
										</h:panelGroup>
										<h:selectOneMenu value="#{advancedSearchResultBean.selectedSortCriterion}">
											<f:selectItems value="#{advancedSearchResultBean.sortIndicesMenu}"/>
											<f:ajax event="change" listener="#{advancedSearchResultBean.changeSortCriteria}" render="@all"/>
										</h:selectOneMenu>
									</h:panelGroup>
								</h:panelGroup>
						</h:panelGroup>
						<ui:remove>
						<a4j:repeat var="sortCriterion" value="#{advancedSearchResultBean.sortCriterionList}">
							<h:panelGroup layout="block" styleClass="eg3_container_1">
								<h:panelGroup layout="block" styleClass="eg3_container_3_4">
									<h:panelGroup layout="block" styleClass="eg3_dynamicSelectBox_js eg3_container_1 eg3_border_1 eg3_borderstyle_1">
										<h:panelGroup layout="block" styleClass="eg3_selectionContent eg3_content_bgColor eg3_main_color">
											<span class="eg3_selectionText"></span>
										</h:panelGroup>
										<h:selectOneMenu value="#{sortCriterion.sortIndex}">
											<f:selectItems value="#{advancedSearchResultBean.sortIndicesMenu}"/>
											<f:ajax event="change" listener="#{advancedSearchResultBean.changeSortCriteria}" render="@all"/>
										</h:selectOneMenu>
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="eg3_container_1_10" style="margin-left:0.25em;">
									<h:commandButton action="#{advancedSearchResultBean.changeSortOrder(sortCriterion)}" value=" " styleClass="eg3_ico_sortASC_16" title="#{lbl.sort_asc}" rendered="#{sortCriterion.sortOrder == 'ASCENDING'}">
										<f:ajax event="change" listener="#{advancedSearchResultBean.changeSortOrder}" render="@all"/>
									</h:commandButton>
									<h:commandButton action="#{advancedSearchResultBean.changeSortOrder(sortCriterion)}" value=" " styleClass="eg3_ico_sortDESC_16" title="#{lbl.sort_desc}" rendered="#{sortCriterion.sortOrder == 'DESCENDING'}">
										<f:ajax event="change" listener="#{advancedSearchResultBean.changeSortOrder}" render="@all"/>
									</h:commandButton>
								</h:panelGroup>
							</h:panelGroup>
						</a4j:repeat>
						</ui:remove>
					</h:form>
				</h:panelGroup>
			</h:panelGroup>
			
			<h:panelGroup layout="block" styleClass="eg3_container_4_5">
				<h:panelGroup layout="block" styleClass="eg3_container_1 eg3_sumOfSearchResult">
					<h:outputLabel styleClass="eg3_selectLabel" value="#{cc.attrs.paginatorBean.totalNumberOfRecords} #{lbl.list_totalNumberOfHits}"/>
				</h:panelGroup>
				<list:bibList_shortDLC rendered="#{advancedSearchResultBean.currentPartList.size() > 0}">
					<a4j:repeat var="volume" value="#{advancedSearchResultBean.currentPartList}">
						<list:bibSimpleItemAllVolume volume="#{volume}" fulltextHits="#{advancedSearchResultBean.fulltextSearchStringsAsQueryParam}"/>
					</a4j:repeat>
				</list:bibList_shortDLC>
				
				<h:panelGroup layout="block" styleClass="eg3_container_1" rendered="#{empty advancedSearchResultBean.currentPartList}">
					<h:panelGroup styleClass="eg3_startpageTitle">
						<h3><h:outputText value="#{lbl.sc_not_found}"/></h3>
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>
		</mpdl:paginator>
	</ui:define>
</ui:composition>

</html>
