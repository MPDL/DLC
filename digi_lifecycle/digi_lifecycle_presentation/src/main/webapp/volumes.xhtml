<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:fu="http://java.sun.com/jsf/composite/components/fileUpload"
	xmlns:mpdl="http://java.sun.com/jsf/composite/components/mpdl"
	xmlns:list="http://java.sun.com/jsf/composite/components/mpdl/list"
	xmlns:pretty="http://ocpsoft.com/prettyfaces">


<ui:composition template="templates/template_v3.xhtml">
	<ui:param name="headline" value="#{allVolumesBean.collection.name}" />
	
	<ui:define name="breadcrumbTitle">
		<h:panelGroup layout="block" styleClass="eg3_container_1 eg3_breadTitle" style="background-color:#323232;">
			<mpdl:hierarchicalBreadcrumb ou="#{allVolumesBean.collection}" colId="#{allVolumesBean.collection.id}" colName="#{allVolumesBean.collection.name}">
			</mpdl:hierarchicalBreadcrumb>
		</h:panelGroup>
	</ui:define>
	
	<ui:define name="mainContent">
		<mpdl:paginator paginatorBean="#{allVolumesBean}">
		
		
			<h:panelGroup layout="block" styleClass="eg3_container_1_5">
			
				<h:panelGroup layout="block" styleClass="eg3_container_9_10 eg3_containerCenter" style="margin-top:2em;">
					<h:outputText value="#{lbl.list_sortCriterion}: "/>
				</h:panelGroup>
				
				<h:panelGroup layout="block" styleClass="eg3_container_9_10 eg3_containerCenter">
					<h:form>
						<a4j:repeat var="sortCriterion" value="#{allVolumesBean.sortCriterionList}">
							<h:panelGroup layout="block" styleClass="eg3_container_1">
								<h:panelGroup layout="block" styleClass="eg3_container_3_4">
									<h:panelGroup layout="block" styleClass="eg3_dynamicSelectBox_js eg3_container_1">
										<h:panelGroup layout="block" styleClass="eg3_selectionContent eg3_content_bgColor eg3_main_color">
											<span class="eg3_selectionText"></span>
										</h:panelGroup>
										<h:selectOneMenu value="#{sortCriterion.sortIndex}">
											<f:selectItems value="#{allVolumesBean.sortIndicesMenu}"/>
											<f:ajax event="change" listener="#{allVolumesBean.changeSortCriteria}" render="@all"/>
										</h:selectOneMenu>
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="eg3_container_1_10" style="margin-left:0.25em;">
									<h:commandButton action="#{allVolumesBean.changeSortOrder(sortCriterion)}" value=" " styleClass="eg3_ico_sortASC_16" title="#{lbl.sort_asc}" rendered="#{sortCriterion.sortOrder == 'ASCENDING'}">
										<f:ajax event="change" listener="#{allVolumesBean.changeSortOrder}" render="@all"/>
									</h:commandButton>
									<h:commandButton action="#{allVolumesBean.changeSortOrder(sortCriterion)}" value=" " styleClass="eg3_ico_sortDESC_16" title="#{lbl.sort_desc}" rendered="#{sortCriterion.sortOrder == 'DESCENDING'}">
										<f:ajax event="change" listener="#{allVolumesBean.changeSortOrder}" render="@all"/>
									</h:commandButton>
								</h:panelGroup>
							</h:panelGroup>
						</a4j:repeat>
					</h:form>
				</h:panelGroup>
			</h:panelGroup>
		
		
			<h:panelGroup layout="block" styleClass="eg3_container_4_5">
			<script type="text/javascript">
				$(document).ready(function(){addDisplayControl('.listItemMultiVolume');});
			</script>	
			<h:form id="volumes" >
				<list:bibList_default>
					<a4j:repeat var="volume" value="#{allVolumesBean.currentPartList}">
				 		<list:bibItemSingleVolume volume="#{volume}" rendered="#{volume.item.properties.contentModel.objid == applicationBean.cmMono}"/>
				 		<list:bibItemMultiVolume volume="#{volume}" rendered="#{volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}"/>
					</a4j:repeat>
				</list:bibList_default>
			</h:form>
			</h:panelGroup>
		</mpdl:paginator>
	</ui:define>
</ui:composition>

</html>
