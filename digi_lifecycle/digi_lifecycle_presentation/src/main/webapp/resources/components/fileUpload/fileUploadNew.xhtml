<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:cc="http://java.sun.com/jsf/composite"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<!-- INTERFACE -->
<cc:interface>
	<cc:attribute name="fileUploadListener" method-signature="void method(de.mpg.mpdl.jsf.components.fileUpload.FileUploadEvent)" required="true" />
	<cc:attribute name="rerender" type="java.lang.Boolean" />
	<cc:attribute name="maxFileSize" type="java.lang.String" />
	<cc:attribute name="fileExtension" type="java.lang.String" />
</cc:interface>

<!-- IMPLEMENTATION -->
<cc:implementation>

	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
	<script type="text/javascript" src="http://bp.yahooapis.com/2.4.21/browserplus-min.js"></script>

	<div id="submit-form" class="full_area0 small_marginLExcl infoPage"
		style="width: 41.15em;">
		<h:outputScript library="components/fileUpload/plupload" name="plupload.full.min.js" />
		<h:outputScript library="components/fileUpload/plupload" name="plupload.gears.js" />
		<h:outputScript library="components/fileUpload/plupload" name="plupload.silverlight.js" />
		<h:outputScript library="components/fileUpload/plupload" name="plupload.flash.js" />
		<h:outputScript library="components/fileUpload/plupload" name="plupload.browserplus.js" />
		<h:outputScript library="components/fileUpload/plupload" name="plupload.html4.js" />
		<h:outputScript library="components/fileUpload/plupload" name="plupload.html5.js" />
		<h:outputScript library="components/fileUpload/plupload" name="jquery.plupload.queue.min.js" />
		<h:outputScript library="components/fileUpload" name="plupload_customNew.js" />

		<h:panelGroup layout="block" class="setMaxFileSize" style="display:none;">
			<h:outputText value="#{cc.attrs.maxFileSize}" />
		</h:panelGroup>
		<h:panelGroup layout="block" class="setFileExtension" style="display:none;">
			<h:outputText value="#{cc.attrs.fileExtension}" />
		</h:panelGroup>

		<div id="uploader">You browser doesn't support native upload.
			Try Firefox 3 or Safari 4.</div>

		<br /> 
		<ui:remove>
			<h:commandButton id="hiddenUploadCompleteButton"
				styleClass="hiddenUploadCompleteButton" value="upload">
				<f:ajax event="click" render="#{cc.attrs.rerender}" />
			</h:commandButton>
		</ui:remove>

		<h:panelGroup id="info" layout="block">
			<rich:panel id="imageInfo" rendered="#{cc.attrs.rerender and uploadBean.size>0}">
				<f:facet name="header">
					<h:outputText value="Uploaded Images" />
				</f:facet>
				<h:outputText value="No files currently uploaded" rendered="#{ingestBean.size==0}" />
				<rich:dataGrid columns="1" value="#{uploadBean.uFiles}" var="file" rowKeyVar="row">
					<rich:panel bodyClass="rich-laguna-panel-no-header">
						<h:panelGrid columns="2">
		                   	<a4j:mediaOutput element="img" mimeType="image/jpeg" createContent="#{uploadBean.paint}" value="#{row}" style="width:50px; height:50px;" cacheable="false"></a4j:mediaOutput>
							<h:panelGrid columns="2">
								<h:outputText value="File Name:" />
								<h:outputText value="#{file.name}" />
								<h:outputText value="File Length(bytes):" />
								<h:outputText value="#{file.size}" />
							</h:panelGrid>
						</h:panelGrid>
					</rich:panel>
				</rich:dataGrid>
				<br />
				<a4j:commandButton action="#{uploadBean.clear}" render="info" value="Clear Uploaded Data" rendered="#{uploadBean.size>0}"/>
			</rich:panel>
		</h:panelGroup>



	</div>







</cc:implementation>
</html>