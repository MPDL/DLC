<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:cc="http://java.sun.com/jsf/composite"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:mpdl="http://java.sun.com/jsf/composite/components/mpdl"
	xmlns:pretty="http://ocpsoft.com/prettyfaces">


<!-- INTERFACE -->
<cc:interface>
	<cc:attribute name="volume" required="true"/>
	<cc:attribute name="fulltextHits"/>
</cc:interface>

<!-- IMPLEMENTATION -->
<cc:implementation>




	
	

		<h:panelGroup>
		<li class="full_area0 listItem">
		 	<h:panelGroup layout="block" styleClass="free_area0 itemHeader">
				<span class="free_area0_p8 endline itemSelectArea">&#160;</span>
				<span class="seperator"></span>
				<span class="free_area0_p8 status statusArea">
					<span class="noDisplay">(</span>
				 	<h:graphicImage id="img" value="#{volumeUtilBean.getDigilibScalerUrlForPage(cc.attrs.volume.pages[0],50,100)}" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMono and volumeUtilBean.getDigilibScalerUrlForPage(cc.attrs.volume.pages[0],50,100) != null}"/>
			 		
			 		<h:panelGroup styleClass="big_imgArea statusIcon virrMediaTypeMG" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMono and volumeUtilBean.getDigilibScalerUrlForPage(cc.attrs.volume.pages[0],50,100) == null}"/>
			 		<h:panelGroup styleClass="big_imgArea statusIcon virrMediaTypeM" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}" />
			 		
			 		<h:outputLabel id="lblMonoItemPublicState" styleClass="medium_label endline" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMono and volumeUtilBean.getDigilibScalerUrlForPage(cc.attrs.volume.pages[0],50,100) == null}">
						<h:outputText value="#{lbl.view_dtls_genre_mono_txt}"/>
					</h:outputLabel>
			 		<h:outputLabel id="lblMultiItemPublicState" styleClass="medium_label endline" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}" >
						<h:outputText value="#{lbl.view_dtls_genre_multi_txt}" />
					</h:outputLabel>
					<span class="noDisplay">)</span>
				</span>
				<span class="seperator status"></span>
				
 				<span class="free_area0_p6 endline itemHeadline">
					<b>
					
						<pretty:link mappingId="viewMultiVol"  rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}" >
							<f:param value="#{cc.attrs.volume.item.objid}" />
							<f:param name="fm" value="#{cc.attrs.fulltextHits}" rendered="#{not empty cc.attrs.fulltextHits}"/>
							<h:outputText value="#{volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name}" rendered="#{(volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).role != 'asn') and (not empty volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name)}"/>
							<h:outputText value="#{lbl.view_dtls_no_author}" rendered="#{(volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).role != 'asn') and (empty volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name)}"/>
							<h:outputText value="[#{volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name} (#{lbl.view_dtls_editor_suffix})]" rendered="#{(volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).role == 'asn') and (not empty volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name)}"/>
							<h:outputText value="[#{lbl.view_dtls_no_author} (#{lbl.view_dtls_editor_suffix})]" rendered="#{(volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).role == 'asn') and (empty volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name)}"/>

							<br/>
							<h:outputText value="#{volumeUtilBean.getMainTitle(cc.attrs.volume.modsMetadata).title}" />
							<h:outputText value=" - #{volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).place} : #{volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).publisher}" rendered="#{not empty volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).publisher || not empty volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).place}"/>
 							<h:outputText value=" , #{volumeUtilBean.getPublicationDates(cc.attrs.volume)[0]}" rendered="#{volumeUtilBean.getSize(cc.attrs.volume.relatedVolumes) > 0}"/>
							<h:outputText value="-#{volumeUtilBean.getPublicationDates(cc.attrs.volume)[1]}" rendered="#{volumeUtilBean.getSize(cc.attrs.volume.relatedVolumes) > 1}" />
						</pretty:link>
						
						<pretty:link mappingId="viewPages"  rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMono}" >
							<f:param value="#{cc.attrs.volume.item.objid}" />
							<f:param value="1" />
							<f:param name="fm" value="#{cc.attrs.fulltextHits}" rendered="#{not empty cc.attrs.fulltextHits}"/>
							<h:outputText value="[#{volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name} (#{lbl.view_dtls_editor_suffix})]" rendered="#{not empty volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name}"/>
							<h:outputText value="[#{lbl.view_dtls_no_author} (#{lbl.view_dtls_editor_suffix})]" rendered="#{empty volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name}"/>
							<br/>
							<h:outputText value="#{volumeUtilBean.getMainTitle(cc.attrs.volume.modsMetadata).title} "/>
							<h:outputText value=" - #{volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).place} : #{volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).publisher}" rendered="#{not empty volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).place}"/>
							<h:outputText value=" , #{volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).dateIssued_425.date}" rendered="#{not empty volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).dateIssued_425.date}"/>
						</pretty:link>

				

<ui:remove>				
						<pretty:link mappingId="viewPages"  rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMono}" >
							<f:param value="#{cc.attrs.volume.item.objid}" />
							<f:param value="1" />
							<f:param name="fm" value="#{cc.attrs.fulltextHits}" rendered="#{not empty cc.attrs.fulltextHits}"/>
							<h:outputText value="[#{volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name} (#{lbl.view_dtls_editor_suffix})]" rendered="#{not empty volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name}"/>
							<h:outputText value="[#{lbl.view_dtls_no_author} (#{lbl.view_dtls_editor_suffix})]" rendered="#{empty volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name}"/>
							<br/>
							<h:outputText value="#{volumeUtilBean.getMainTitle(cc.attrs.volume.modsMetadata).title} "/>
							<h:outputText value="- #{volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).place} " rendered="#{not empty volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).place}"/>
							<h:outputText value=": #{volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).publisher}" rendered="#{not empty volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).publisher}"/>
							<h:outputText value=", #{volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).dateIssued_425.date}" rendered="#{not empty volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).dateIssued_425.date}"/>
						</pretty:link>
						
						<pretty:link mappingId="viewMultiVol" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}" >
							<f:param value="#{cc.attrs.volume.item.objid}" />
							<f:param name="fm" value="#{cc.attrs.fulltextHits}" rendered="#{not empty cc.attrs.fulltextHits}"/>
							<h:outputText value="[#{volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name} (#{lbl.view_dtls_editor_suffix})]" rendered="#{not empty volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name}"/>
							<h:outputText value="[#{lbl.view_dtls_no_author} (#{lbl.view_dtls_editor_suffix})]" rendered="#{empty volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name}"/>
							<br/>
							<h:outputText value="#{volumeUtilBean.getMainTitle(cc.attrs.volume.modsMetadata).title}"/>
							<h:outputText value="- #{volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).place} " rendered="#{not empty volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).place}"/>
							<h:outputText value=": #{volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).publisher}" rendered="#{not empty volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).publisher}"/>
							<h:outputText value=", #{volumeUtilBean.getPublicationDates(allVolumesBean.getRelatedVolumes(volume))[0]}" rendered="#{not empty volumeUtilBean.getPublicationDates(allVolumesBean.getRelatedVolumes(volume))[0]}"/>
							<h:outputText value="-#{volumeUtilBean.getPublicationDates(allVolumesBean.getRelatedVolumes(volume))[1]}" rendered="#{not empty volumeUtilBean.getPublicationDates(allVolumesBean.getRelatedVolumes(volume))[1]}" />
						</pretty:link>
</ui:remove>
					</b>
				</span>
			</h:panelGroup>
			
			
			<h:panelGroup layout="block" styleClass="free_area0_p0 small_marginLIncl endline listItemLine" rendered="true">
						<span class="huge_area0_p8 endline labelLine">
							<h:outputText value="#{lbl.ViewItemFull_lblFulltextSearchResults}" /><span class="noDisplay">: </span>
						</span>
						<span class="xHuge_area0 endline">
							<a4j:repeat value="#{cc.attrs.volume.searchResultHighlight}" var="highlight" >
								<h:panelGroup styleClass="xHuge_area0 endline" rendered="#{highlight.type=='FULLTEXT'}">
									<ui:param name="pageNumber" value="#{volumeUtilBean.getPageNumberForPageId(cc.attrs.volume, highlight.objid)}"/>
									
									<pretty:link mappingId="viewPages">
										<f:param value="#{cc.attrs.volume.item.objid}"/>
										<f:param value="#{pageNumber}"/>
										<f:param name="fm" value="#{cc.attrs.fulltextHits}" rendered="#{not empty cc.attrs.fulltextHits}"/>
										<h:outputText value="Scan #{pageNumber}"/>
									</pretty:link>
									
									<br/>
									<a4j:repeat var="textFragment" value="#{highlight.textFragments}" >
											<h:outputText value="#{volumeUtilBean.emphasizeWordsinTextFragment(textFragment, 'searchHit')}" escape="false"/>
											<br/>
											<br/>
									</a4j:repeat>
									<br/><br/>
								</h:panelGroup>
							</a4j:repeat>
						</span>
			</h:panelGroup>
			
			<h:panelGroup layout="block" styleClass="full_area0 shortView" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}">
				<div class="free_area0_p0  small_marginLIncl endline listItemLine">
					<span class="huge_area0_p8 endline labelLine">

						<h:panelGroup layout="block" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}">
							<a class="collapse" >
								<span class="noDisplay">
									<h:outputText value="#{lbl.ViewItemShort_lblShow}"/> 
								</span>
								<h:outputText value="#{lbl.ViewItemShort_lblLess}" />
							</a>
							<a class="expand">
								<span class="noDisplay">
									<h:outputText value="#{lbl.ViewItemShort_lblShow}" rendered="#{volumeUtilBean.getSize(cc.attrs.volume.relatedVolumes) > 0}"/> 
								</span> 
								<h:outputText value="#{lbl.ViewItemShort_lblMore}" rendered="#{volumeUtilBean.getSize(cc.attrs.volume.relatedVolumes) > 0}"/>
							</a>
						</h:panelGroup>
<ui:remove>			
						<h:outputText value="#{lbl.view_dtls_title_txt}"/><span class="noDisplay">: </span>
</ui:remove>	
					</span>
<ui:remove>	
					<span class="xHuge_area0 endline">
						<h:outputText value="#{volumeUtilBean.getMainTitle(cc.attrs.volume.modsMetadata).title}"/>&#160;
					</span>
</ui:remove>	
				</div>
		
<ui:remove>
				<h:panelGroup layout="block" styleClass="free_area0_p0 small_marginLIncl endline listItemLine" rendered="#{not empty volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name}">
					<span class="huge_area0_p8 endline labelLine">
						<h:outputText value="#{lbl.view_dtls_author_txt}" rendered="#{volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).role != 'asn'}" />
						<h:outputText value="#{lbl.view_dtls_editor_txt}" rendered="#{volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).role == 'asn'}" />

						<span class="noDisplay">: </span>
					</span>
					<span class="xHuge_area0 endline">
						<h:outputText value="#{volumeUtilBean.getFirstNamePart(cc.attrs.volume.modsMetadata).name}"/>&#160;
					</span>
				</h:panelGroup>
				
				<h:panelGroup layout="block" styleClass="free_area0_p0  small_marginLIncl endline listItemLine" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}" >
					<span class="huge_area0_p8 endline labelLine">
						<h:outputText value="#{lbl.view_dtls_date_issued_txt}"/><span class="noDisplay">: </span>
					</span>
					<span class="xHuge_area0 endline">
						<h:outputText value="#{volumeUtilBean.getPublicationDates(allVolumesBean.getRelatedVolumes(volume))[0]}-#{volumeUtilBean.getPublicationDates(allVolumesBean.getRelatedVolumes(volume))[1]}"/>&#160;
					</span>				
				</h:panelGroup>
				
				<h:panelGroup layout="block" styleClass="free_area0_p0  small_marginLIncl endline listItemLine" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMono}">
					<span class="huge_area0_p8 endline labelLine">
						<h:outputText value="#{lbl.view_dtls_date_issued_txt}"/><span class="noDisplay">: </span>
					</span>
					<span class="xHuge_area0 endline">
						<h:outputText value="#{volumeUtilBean.getMainPublisher(cc.attrs.volume.modsMetadata).dateIssued_425.date}"/>&#160;
					</span>
				</h:panelGroup>
</ui:remove>

				


				<h:panelGroup layout="block" styleClass="free_area0_p0  small_marginLIncl endline listItemLine" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}">
					<span class="huge_area0_p8 endline labelLine">
						<h:outputText value="Number of Volumes"/><span class="noDisplay">: </span>
					</span>
					<span class="xHuge_area0 endline">
						<h:outputText value="#{volumeUtilBean.getSize(cc.attrs.volume.relatedVolumes)}"/>&#160;
					</span>
				</h:panelGroup>
				
				
				<!-- TODO		
				<h:panelGroup layout="block" styleClass="free_area0_p0  small_marginLIncl endline listItemLine" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMono}">
					<span class="huge_area0_p8 endline labelLine">
						<h:outputText value="#{lbl.edit_tree_toc_lastmodificationdate}"/><span class="noDisplay">: </span>
					</span>
					<span class="xHuge_area0 endline">
						<h:outputText value="#{book.toc.lmd2display}"/>&#160;
					</span>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="free_area0_p0  small_marginLIncl endline listItemLine" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMono}">
					<span class="huge_area0_p8 endline labelLine">
						<h:outputText value="#{lbl.edit_tree_toc_releasedate}"/><span class="noDisplay">: </span>
					</span>
					<span class="xHuge_area0 endline">
						<h:outputText value="#{book.toc.releaseDate}"/>&#160;
					</span>
				</h:panelGroup>
				
				<h:panelGroup layout="block" styleClass="free_area0_p0  small_marginLIncl endline listItemLine" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}">
					<span class="huge_area0_p8 endline labelLine">
						<h:outputText value="#{lbl.edit_tree_toc_versionstate}"/><span class="noDisplay">: </span>
					</span>
					<span class="xHuge_area0 endline">
						<h:outputText value="#{book.toc.versionStatusLabel}"/>&#160;
					</span>
				</h:panelGroup>
				 -->
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="full_area0 shortView" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMono  and volumeUtilBean.getDigilibScalerUrlForPage(cc.attrs.volume.pages[0],50,100) != null}">
				<div class="free_area0_p0  small_marginLIncl endline listItemLine">											
					<pretty:link mappingId="thumbnails">
						<f:param value="#{cc.attrs.volume.item.objid}" />
					<h:outputText style="padding-left:700px" value="Thumbnails"/>
					</pretty:link>
				</div>
			</h:panelGroup>
		
			<h:panelGroup layout="block" styleClass="full_area0 mediumView" rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmMultiVol}">
				<mpdl:volumes volumes="#{allVolumesBean.getRelatedVolumes(cc.attrs.volume)}" />
			</h:panelGroup>

		
		
		
		
		</li>
		</h:panelGroup>

</cc:implementation>
</html>