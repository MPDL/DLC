<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:cc="http://java.sun.com/jsf/composite"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:pretty="http://ocpsoft.com/prettyfaces"
	xmlns:mpdl="http://java.sun.com/jsf/composite/components/mpdl">

	<!-- INTERFACE -->
	<cc:interface>
		<cc:attribute name="volume" required="true"/>
		<cc:attribute name="context" />
	</cc:interface>
	
	<!-- IMPLEMENTATION -->
	<cc:implementation>
		
	<h:panelGroup layout="block" styleClass="eg3_detailItemHeader">

		<h3 class="eg3_multiVolumeTitle">
			<pretty:link mappingId="volumes" title="#{tlt.view_page_goToCollectionOverview}">
				<f:param value="#{cc.attrs.volume.item.properties.context.objid}"/>
				<h:outputText value="#{cc.attrs.context.properties.name}"/>
			</pretty:link>
		</h3>

		<br/>
		<h:panelGroup styleClass="eg3_floatLeft">
			<h:form>
					<!-- Volume -->
					<h:panelGroup rendered="#{cc.attrs.volume.item.properties.contentModel.objid == applicationBean.cmVolume}">
						<!-- Multivolume title -->
						<h3 class="eg3_volumeTitle">
							<h:panelGroup rendered="#{not empty cc.attrs.volume.relatedParentVolume}">
								<mpdl:mvPlayer target="popupMV" vol="#{cc.attrs.volume.relatedParentVolume}"/>
								<a4j:commandLink execute="@this" render="mvPlayer" oncomplete="eg3_loadPopup();">
									<h:outputText value="#{volumeUtilBean.getFullTitleView(cc.attrs.volume.relatedParentVolume)}" />
								</a4j:commandLink>
							</h:panelGroup>
							<h:panelGroup rendered="#{empty cc.attrs.volume.relatedParentVolume}">
								<h:outputText value="ERROR! No multivolume found" />
							</h:panelGroup>
						</h3>
						<br/>
						<!-- Volume title -->
						<h4 class="eg3_volumeDetails" >
							<pretty:link mappingId="viewPagesWithoutNumber">
								<f:param value="#{cc.attrs.volume.objidAndVersion}"/>
								<f:param value="recto-verso"/>
								<h:outputText value="#{volumeUtilBean.getVolumeFullTitleView(cc.attrs.volume)}"/>
							</pretty:link>
						</h4>	
					</h:panelGroup>
					
					<!-- Monograph -->	
					<h:panelGroup rendered="#{cc.attrs.volume.item.properties.contentModel.objid != applicationBean.cmVolume}">
						<h3 class="eg3_volumeTitle">
							<pretty:link mappingId="viewPagesWithoutNumber">
								<f:param value="#{cc.attrs.volume.objidAndVersion}"/>
								<f:param value="recto-verso"/>
								<h:outputText value="#{volumeUtilBean.getFullTitleView(cc.attrs.volume)}"  />
							</pretty:link>
						</h3>
					</h:panelGroup>
			</h:form>
		</h:panelGroup>
	</h:panelGroup>
		
	</cc:implementation>
</html>